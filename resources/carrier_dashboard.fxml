<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml" 
            fx:controller="main.controllers.CarrierController"
            prefWidth="960" prefHeight="540">

    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-background-color: linear-gradient(to right, #f093fb 0%, #f5576c 50%, #fd79a8 100%); -fx-padding: 20 30 20 30; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.4), 30, 0, 0, 10);">
            <Label text="ðŸ›«" style="-fx-font-size: 32px;"/>
            <Label text="CARRIER DASHBOARD" style="-fx-text-fill: white; -fx-font-weight: 900; -fx-font-size: 24px; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 10, 0, 0, 3);"/>
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="welcomeLabel" text="Welcome" style="-fx-text-fill: rgba(255,255,255,0.95); -fx-font-weight: 700; -fx-font-size: 15px;"/>
            <Button text="Logout" onAction="#handleLogout" style="-fx-background-color: rgba(255,255,255,0.3); -fx-text-fill: white; -fx-padding: 12 24; -fx-background-radius: 16; -fx-cursor: hand; -fx-border-color: rgba(255,255,255,0.5); -fx-border-width: 2; -fx-border-radius: 16; -fx-font-weight: 700; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 15, 0, 0, 5);"/>
        </HBox>
    </top>

    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE" style="-fx-padding: 15; -fx-background-color: linear-gradient(to bottom right, #FEF3C7 0%, #FDE68A 50%, #FCD34D 100%);">
            
            <Tab text="Available Orders (Pending) ðŸ†•">
                <VBox spacing="20" style="-fx-padding: 25; -fx-background-color: white; -fx-background-radius: 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 16, 0, 0, 4);">
                    <!-- Header Section -->
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <VBox>
                            <Label text="ðŸ†•" style="-fx-font-size: 28px;"/>
                        </VBox>
                        <VBox spacing="5">
                            <Label text="Available Orders" style="-fx-font-style: italic; -fx-text-fill: #2C3E50; -fx-font-size: 20px; -fx-font-weight: bold;"/>
                            <Label text="Select an order to deliver" style="-fx-font-size: 13px; -fx-text-fill: #7f8c8d;"/>
                        </VBox>
                    </HBox>
                    
                    <TableView fx:id="availableTable" VBox.vgrow="ALWAYS" styleClass="modern-table" style="-fx-background-radius: 12;">
                        <columns>
                            <TableColumn fx:id="colAvId" text="ID" prefWidth="50"/>
                            <TableColumn fx:id="colAvCustomer" text="Customer" prefWidth="100"/>
                            <TableColumn fx:id="colAvAddress" text="Address" prefWidth="200"/>
                            <TableColumn fx:id="colAvProducts" text="Product List" prefWidth="250"/>
                            <TableColumn fx:id="colAvTotal" text="Total (TL)" prefWidth="80"/>
                            <TableColumn fx:id="colAvDate" text="Req. Date" prefWidth="120"/>
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                    </TableView>
                    <Button text="ðŸ‘‡ Take Selected Order" onAction="#handleTakeOrder" 
                            maxWidth="Infinity" style="-fx-background-color: linear-gradient(to right, #27ae60, #2ecc71); -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 16px; -fx-padding: 16; -fx-background-radius: 12; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(39,174,96,0.3), 12, 0, 0, 4);"/>
                </VBox>
            </Tab>

            <Tab text="My Active Deliveries ðŸ“¦">
                <VBox spacing="20" style="-fx-padding: 25; -fx-background-color: white; -fx-background-radius: 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 16, 0, 0, 4);">
                    <!-- Header Section -->
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <VBox>
                            <Label text="ðŸ“¦" style="-fx-font-size: 28px;"/>
                        </VBox>
                        <VBox spacing="5">
                            <Label text="Active Deliveries" style="-fx-font-style: italic; -fx-text-fill: #2C3E50; -fx-font-size: 20px; -fx-font-weight: bold;"/>
                            <Label text="Orders currently in your bag" style="-fx-font-size: 13px; -fx-text-fill: #7f8c8d;"/>
                        </VBox>
                    </HBox>
                    
                    <TableView fx:id="currentTable" VBox.vgrow="ALWAYS" styleClass="modern-table" style="-fx-background-radius: 12;">
                        <columns>
                            <TableColumn fx:id="colCurId" text="ID" prefWidth="50"/>
                            <TableColumn fx:id="colCurCustomer" text="Customer" prefWidth="100"/>
                            <TableColumn fx:id="colCurAddress" text="Delivery Address" prefWidth="250"/>
                            <TableColumn fx:id="colCurProducts" text="Products" prefWidth="250"/>
                            <TableColumn fx:id="colCurTotal" text="Collect (TL)" prefWidth="100"/>
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                    </TableView>
                    <Button text="âœ… Complete Delivery &amp; Collect Money" onAction="#handleCompleteDelivery" 
                            maxWidth="Infinity" style="-fx-background-color: linear-gradient(to right, #f39c12, #f1c40f); -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 16px; -fx-padding: 16; -fx-background-radius: 12; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(243,156,18,0.3), 12, 0, 0, 4);"/>
                </VBox>
            </Tab>

            <Tab text="Completed History ðŸ“œ">
                <VBox spacing="20" style="-fx-padding: 25; -fx-background-color: white; -fx-background-radius: 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 16, 0, 0, 4);">
                    <!-- Header Section -->
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <VBox>
                            <Label text="ðŸ“œ" style="-fx-font-size: 28px;"/>
                        </VBox>
                        <VBox spacing="5">
                            <Label text="Completed Deliveries" style="-fx-font-style: italic; -fx-text-fill: #2C3E50; -fx-font-size: 20px; -fx-font-weight: bold;"/>
                            <Label text="Your delivery history" style="-fx-font-size: 13px; -fx-text-fill: #7f8c8d;"/>
                        </VBox>
                    </HBox>
                    
                    <TableView fx:id="completedTable" VBox.vgrow="ALWAYS" styleClass="modern-table" style="-fx-background-radius: 12;">
                        <columns>
                            <TableColumn fx:id="colComId" text="ID" prefWidth="50"/>
                            <TableColumn fx:id="colComCustomer" text="Customer" prefWidth="150"/>
                            <TableColumn fx:id="colComTotal" text="Amount Earned" prefWidth="100"/>
                            <TableColumn fx:id="colComDate" text="Completed At" prefWidth="150"/>
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                    </TableView>
                </VBox>
            </Tab>

        </TabPane>
    </center>

</BorderPane>