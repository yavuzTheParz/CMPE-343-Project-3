<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml" 
            fx:controller="main.controllers.OwnerController"
            prefWidth="1000" prefHeight="700">

    <top>
        <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-background-color: #2c3e50; -fx-padding: 15;">
            <Label text="OWNER PANEL (BOSS) ðŸ‘”" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 20px;"/>
            <Region HBox.hgrow="ALWAYS" />
            <Button text="Logout" onAction="#handleLogout" style="-fx-background-color: #c0392b; -fx-text-fill: white;"/>
        </HBox>
    </top>

    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE">
            
            <Tab text="Products (Greedy Mode) ðŸ’°">
                <VBox spacing="10" style="-fx-padding: 10;">
                    <TableView fx:id="productTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colName" text="Name" prefWidth="150"/>
                            <TableColumn fx:id="colCategory" text="Category" prefWidth="100"/>
                            <TableColumn fx:id="colPrice" text="Base Price" prefWidth="100"/>
                            <TableColumn fx:id="colStock" text="Stock" prefWidth="100"/>
                            <TableColumn fx:id="colThreshold" text="Threshold (Double Price)" prefWidth="150"/>
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                    </TableView>
                    <Separator/>
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <TextField fx:id="nameField" promptText="Name" prefWidth="100"/>
                        <ComboBox fx:id="categoryBox" prefWidth="100"/>
                        <TextField fx:id="priceField" promptText="Price" prefWidth="80"/>
                        <TextField fx:id="stockField" promptText="Stock" prefWidth="80"/>
                        <TextField fx:id="thresholdField" promptText="Threshold" prefWidth="80"/>
                        <Button text="Add" onAction="#handleAddProduct" style="-fx-background-color: #27ae60; text-fill: white;"/>
                        <VBox>
    <Button text="Select Image ðŸ“·" onAction="#handleSelectImage" style="-fx-background-color: #9b59b6; -fx-text-fill: white;"/>
    <Label fx:id="imagePathLabel" text="No image selected" style="-fx-font-size: 10px;"/>
</VBox>
                        <Button text="Update" onAction="#handleUpdateProduct" style="-fx-background-color: #2980b9; text-fill: white;"/>
                        <Button text="Delete" onAction="#handleDeleteProduct" style="-fx-background-color: #e74c3c; text-fill: white;"/>
                    </HBox>
                </VBox>
            </Tab>

            <Tab text="Carriers ðŸ›µ">
                <HBox spacing="20" style="-fx-padding: 20;">
                    <VBox spacing="10">
                        <Label text="Carrier List" style="-fx-font-weight: bold;"/>
                        <ListView fx:id="carrierList" prefHeight="400"/>
                        <Button text="Fire Selected ðŸ”¥" onAction="#handleFireCarrier" maxWidth="Infinity" style="-fx-background-color: #e74c3c; text-fill: white;"/>
                    </VBox>
                    <VBox spacing="10" style="-fx-border-color: #bdc3c7; -fx-padding: 10;">
                        <Label text="Employ New Carrier" style="-fx-font-weight: bold;"/>
                        <TextField fx:id="newCarrierName" promptText="Username"/>
                        <TextField fx:id="newCarrierPass" promptText="Password"/>
                        <Button text="Hire Carrier ðŸ¤" onAction="#handleHireCarrier" style="-fx-background-color: #27ae60; text-fill: white;"/>
                    </VBox>
                </HBox>
            </Tab>

            <Tab text="Reports &amp; Analytics ðŸ“Š">
                <VBox style="-fx-padding: 20;">
                    <BarChart fx:id="salesChart" title="Product Sales Overview">
                        <xAxis><CategoryAxis label="Product" fx:id="xAxis"/></xAxis>
                        <yAxis><NumberAxis label="Sold (kg)" fx:id="yAxis"/></yAxis>
                    </BarChart>
                </VBox>
            </Tab>

            <Tab text="Messages &amp; Settings âš™ï¸">
                <HBox spacing="20" style="-fx-padding: 20;">
                    <VBox spacing="10" HBox.hgrow="ALWAYS">
                        <Label text="Customer Messages" style="-fx-font-weight: bold;"/>
                        <ListView fx:id="messageList" VBox.vgrow="ALWAYS"/>
                        <TextArea fx:id="replyField" promptText="Type reply here..." prefRowCount="3"/>
                        <Button text="Send Reply âœ‰ï¸" onAction="#handleReply" style="-fx-background-color: #2980b9; text-fill: white;"/>
                    </VBox>
                    <Separator orientation="VERTICAL"/>
                    <VBox spacing="10" minWidth="200">
                        <Label text="System Settings" style="-fx-font-weight: bold;"/>
                        <Label text="Loyalty Discount (%):"/>
                        <TextField fx:id="loyaltyField" promptText="10"/>
                        <Button text="Update Settings" onAction="#handleUpdateSettings" style="-fx-background-color: #f39c12;"/>
                        <Separator/>
                        <Label text="All Orders Log:" style="-fx-font-weight: bold;"/>
                        <ListView fx:id="allOrdersList" VBox.vgrow="ALWAYS"/>
                    </VBox>
                </HBox>
            </Tab>

        </TabPane>
    </center>

</BorderPane>